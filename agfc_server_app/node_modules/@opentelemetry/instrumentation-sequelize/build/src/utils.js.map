{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../src/utils.ts"],"names":[],"mappings":";AAAA;;;;;;;;;;;;;;GAcG;;;AAEI,MAAM,qBAAqB,GAAG,CAAC,KAAgC,EAAE,EAAE;IACxE,IAAI;QACF,MAAM,MAAM,GAAG,KAAK,EAAE,KAAK,CAAC,2CAA2C,CAAC,CAAC;QACzE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC;YAAE,OAAO;QAEnC,OAAO,MAAM;aACV,GAAG,CAAC,KAAK,CAAC,EAAE,CACX,KAAK;aACF,IAAI,EAAE;aACN,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC;aACzB,OAAO,CAAC,UAAU,EAAE,IAAI,CAAC,CAC7B;aACA,IAAI,EAAE;aACN,IAAI,CAAC,GAAG,CAAC,CAAC;KACd;IAAC,MAAM;QACN,OAAO;KACR;AACH,CAAC,CAAC;AAjBW,QAAA,qBAAqB,yBAiBhC","sourcesContent":["/*\n * Copyright The OpenTelemetry Authors, Aspecto\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *      https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nexport const extractTableFromQuery = (query: string | null | undefined) => {\n  try {\n    const result = query?.match(/(?<=from|join|truncate)\\s+\"?`?(\\w+)\"?`?/gi);\n    if (!Array.isArray(result)) return;\n\n    return result\n      .map(table =>\n        table\n          .trim()\n          .replace(/^\"(.*)\"$/, '$1')\n          .replace(/^`(.*)`$/, '$1')\n      )\n      .sort()\n      .join(',');\n  } catch {\n    return;\n  }\n};\n"]}